!function(l){l.fn.fontselect=function(t){function e(t,e){return function(){return t.apply(e,arguments)}}var a=["Helvetica","Helvetica","Lato","Roboto","Josefin Sans","Lobster","Open Sans","Poiret One","Dancing Script","Bangers","Playfair Display","Chewy","Quicksand","Great Vibes","Righteous","Crafty Girls","Mystery Quest","Serif","Verdana","Montserrat","Oswald","Unica One","Muli","Courier","Raleway","Carter One","Varela Round","Julius Sans One"],n=["Match Store Font","Helvetica","Lato","Roboto","Josefin Sans","Lobster","Open Sans","Poiret One","Dancing Script","Bangers","Playfair Display","Chewy","Quicksand","Great Vibes","Righteous","Crafty Girls","Mystery Quest","Serif","Verdana","Montserrat","Oswald","Unica One","Muli","Courier","Raleway","Carter One","Varela Round","Julius Sans One"],i={style:"font-select",placeholder:"Select a font",lookahead:2,api:"//fonts.googleapis.com/css?family="},s=(o.prototype.bindEvents=function(){l("li",this.$results).click(e(this.selectFont,this)).mouseenter(e(this.activateFont,this)).mouseleave(e(this.deactivateFont,this)),l("span",this.$select).click(e(this.toggleDrop,this)),l("body").click(e(this.hideDrop,this)),l(this.$element).mouseenter(e(this.mouseon,this)),l(this.$element).mouseleave(e(this.mouseout,this)),this.$arrow.click(e(this.toggleDrop,this))},o.prototype.mouseon=function(){this.canBeHidden=!1},o.prototype.mouseout=function(){this.canBeHidden=!0},o.prototype.toggleDrop=function(t){this.active?(this.$element.removeClass("font-select-active"),this.$drop.hide(),clearInterval(this.visibleInterval)):(this.$element.addClass("font-select-active"),this.$drop.show(),this.moveToSelected(),this.visibleInterval=setInterval(e(this.getVisibleFonts,this),500)),this.active=!this.active},o.prototype.hideDrop=function(t){this.active&&this.canBeHidden&&(this.$element.removeClass("font-select-active"),this.$drop.hide(),clearInterval(this.visibleInterval),this.active=!1)},o.prototype.selectFont=function(){var t=l("li.active",this.$results).data("value");this.$original.val(t).attr("data-text",l("li.active",this.$results).text()).change(),"Match Store Font"==l("li.active",this.$results).text()?this.$element.parent().next().show():this.$element.parent().next().hide(),this.updateSelected(),this.toggleDrop()},o.prototype.moveToSelected=function(){var t=this.$original.val();t?l("li[data-value='"+t+"']",this.$results):l("li",this.$results).first()},o.prototype.activateFont=function(t){l("li.active",this.$results).removeClass("active"),l(t.currentTarget).addClass("active")},o.prototype.deactivateFont=function(t){l(t.currentTarget).removeClass("active")},o.prototype.updateSelected=function(){var t=this.$original.val(),e=this.$original.attr("data-text");console.log(e),l("span",this.$element).text(this.toReadable(e)).css(this.toStyle(t))},o.prototype.setupHtml=function(){this.$original.empty().hide(),this.$element=l("<div>",{class:this.options.style}),this.$arrow=l("<div><b></b></div>"),this.$select=l("<a><span>"+this.options.placeholder+"</span></a>"),this.$drop=l("<div>",{class:"fs-drop"}),this.$results=l("<ul>",{class:"fs-results"}),this.$original.after(this.$element.append(this.$select.append(this.$arrow)).append(this.$drop)),this.$drop.append(this.$results.append(this.fontsAsHtml())).hide()},o.prototype.fontsAsHtml=function(){for(var t,e,i=a.length,s="",o=0;o<i;o++)t=this.toReadable(n[o]),e=this.toStyle(a[o]),s+='<li data-value="'+a[o]+'" style="font-family: '+e["font-family"]+"; font-weight: "+e["font-weight"]+'">'+t+"</li>";return s},o.prototype.toReadable=function(t){return t.replace(/[\+|:]/g," ")},o.prototype.toStyle=function(t){var e=t.split(":");return{"font-family":this.toReadable(e[0]),"font-weight":e[1]||400}},o.prototype.getVisibleFonts=function(){var s,o,a,t;this.$results.is(":hidden")||(o=(s=this).$results.scrollTop(),a=o+this.$results.height(),this.options.lookahead&&(t=l("li",this.$results).first().height(),a+=t*this.options.lookahead),l("li",this.$results).each(function(){var t,e=l(this).position().top+o,i=e+l(this).height();o<=i&&e<=a&&(t=l(this).data("value"),s.addFontLink(t))}))},o.prototype.addFontLink=function(t){var e=this.options.api+t.replace(/ /g,"+");0===l("link[href*='"+t+"']").length&&l("link:last").after('<link href="'+e+'" rel="stylesheet" type="text/css">')},o);function o(t,e){this.$original=l(t),this.options=e,this.active=!1,this.canBeHidden=!1,this.setupHtml(),this.getVisibleFonts(),this.bindEvents();var i=this.$original.val();i&&(this.updateSelected(),this.addFontLink(i))}return this.each(function(t){return t&&l.extend(i,t),new s(this,i)})}}(jQuery);
